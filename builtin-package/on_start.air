(seq
  (xor
    (seq
      (xor
        (call relay ("spell" "remove") ["decider"])
        (call relay ("op" "noop") [])
      )
      (xor
        (match with_decider "true"
          (seq
            (call relay ("spell" "install") [script dat cfg] id)
            (call relay ("srv" "add_alias") ["decider" id])
          )
        )
        (call relay ("op" "noop") [])
      )
    )
    (call relay ("op" "return") [%last_error%])
  )
 (call relay ("op" "return") [true])
)
